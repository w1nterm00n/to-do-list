{"version":3,"file":"main.js","mappings":"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","sources":["webpack://to-do-list/./src/modules/sharedData.js","webpack://to-do-list/./src/modules/DOMCreation.js","webpack://to-do-list/./src/modules/storage.js","webpack://to-do-list/./src/modules/projects.js","webpack://to-do-list/./src/modules/script.js","webpack://to-do-list/./src/modules/purposes.js"],"sourcesContent":["export const sharedData = {\n\tprojects: [],\n\tcurrentPurpose: null,\n};\n","let purposeDOMCreation = function (purpose) {\n\tlet mainSide = document.querySelector(\".main_side\");\n\tconst toDoLine = document.querySelector(\".to-do-line-closed\");\n\tconst newGoal = toDoLine.cloneNode(true);\n\tnewGoal.style.display = \"block\";\n\tmainSide.appendChild(newGoal);\n\n\tlet title = newGoal.querySelector(\"#title_text\");\n\ttitle.textContent = purpose.title;\n\tlet deadline = newGoal.querySelector(\".deadline\");\n\tdeadline.textContent = purpose.deadline;\n\tlet toggle = newGoal.querySelector(\".toggle\");\n\n\tlet isFull = false;\n\ttoggle.addEventListener(\"click\", function () {\n\t\tif (isFull === false) {\n\t\t\tshowFull();\n\t\t\tisFull = true;\n\t\t} else {\n\t\t\thideFull();\n\t\t\tisFull = false;\n\t\t}\n\t});\n\n\t//DESCRIPTION AND PRIORITY CREATION START\n\tlet fullPart = document.createElement(\"div\");\n\tfullPart.className = \"description_and_priority_part\";\n\tnewGoal.appendChild(fullPart);\n\tlet descriptionSide = document.createElement(\"div\");\n\tdescriptionSide.className = \"description_side\";\n\tfullPart.appendChild(descriptionSide);\n\tlet descriptionText = document.createElement(\"p\");\n\tdescriptionText.textContent = \"Description:\";\n\tdescriptionSide.appendChild(descriptionText);\n\n\tlet description = document.createElement(\"p\");\n\tdescription.textContent = purpose.details;\n\tdescriptionSide.appendChild(description);\n\n\tlet prioritySide = document.createElement(\"div\");\n\tprioritySide.className = \"priority_side\";\n\tfullPart.appendChild(prioritySide);\n\tlet priorityText = document.createElement(\"p\");\n\tpriorityText.textContent = \"Priority:\";\n\tprioritySide.appendChild(priorityText);\n\n\tlet priority = document.createElement(\"p\");\n\tpriority.textContent = purpose.priority;\n\tprioritySide.appendChild(priority);\n\tlet toggleImg = toggle.querySelector(\"#toggleImg\");\n\thideFull();\n\t//DESCRIPTION AND PRIORITY CREATION END\n\n\tfunction showFull() {\n\t\tfullPart.style.display = \"block\";\n\t\ttoggleImg.setAttribute(\"src\", \"pics/toggle_on.svg\");\n\t}\n\tfunction hideFull() {\n\t\tfullPart.style.display = \"none\";\n\t\ttoggleImg.setAttribute(\"src\", \"pics/toggle_off.svg\");\n\t}\n\treturn newGoal;\n};\n\n//добавить сюда ДОМ создание проекта\n\nexport { purposeDOMCreation };\n","import { sharedData } from \"./sharedData.js\";\n\nif (!localStorage.getItem(\"projects\")) {\n\t//т.е. если \"projects\" в localStorage не существует - создаём \"projects\"\n\tvar projectsStorage = JSON.stringify([\n\t\t{\n\t\t\tname: \"Default Project\",\n\t\t\tisActive: \"true\",\n\t\t\tpurposes: [],\n\t\t},\n\t]);\n\tlocalStorage.setItem(\"projects\", projectsStorage);\n}\n\n//localStorage.removeItem(\"projects\");\n\n//берём объект из хранилища, и обычный объект, и сравниваем их между собой\nconst deepEqualObjects = function (obj1, obj2) {\n\tconst keys1 = Object.keys(obj1);\n\tconst keys2 = Object.keys(obj2);\n\n\tif (keys1.length !== keys2.length) {\n\t\treturn false;\n\t}\n\n\tfor (const key of keys1) {\n\t\tif (\n\t\t\tkey !== \"isActive\" &&\n\t\t\tkey !== \"purposes\" &&\n\t\t\tkey !== \"DOM\" &&\n\t\t\tkey !== \"isDone\" &&\n\t\t\ttypeof obj1[key] === \"object\" &&\n\t\t\ttypeof obj2[key] === \"object\"\n\t\t) {\n\t\t\tif (!deepEqual(obj1[key], obj2[key])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if (\n\t\t\tkey !== \"isActive\" &&\n\t\t\tkey !== \"purposes\" &&\n\t\t\tkey !== \"DOM\" &&\n\t\t\tkey !== \"isDone\" &&\n\t\t\tobj1[key] !== obj2[key]\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n};\n\nexport { deepEqualObjects };\n","import { sharedData } from \"./sharedData.js\";\nimport { purposeDOMCreation } from \"./DOMCreation.js\";\nimport { deepEqualObjects } from \"./storage.js\";\nimport { purposesCreation } from \"./purposes.js\";\n\nconst projectCreation = function () {\n\tlet addProjectBtn = document.querySelector(\".addProjectBtn\");\n\taddProjectBtn.addEventListener(\"click\", function () {\n\t\tformManipulation.showForm();\n\t});\n\n\tlet form = document.getElementById(\"projectForm\");\n\tform.addEventListener(\"submit\", (event) => {\n\t\tevent.preventDefault();\n\t\tformManipulation.submitForm(form);\n\t});\n\n\tlet closeBtn = document.querySelector(\".closeProjectBtn\");\n\tcloseBtn.addEventListener(\"click\", function () {\n\t\tformManipulation.hideForm();\n\t});\n\n\t//project form manipulations start\n\tlet formManipulation = {\n\t\tformWrapper: document.querySelector(\".pop-up_project_window\"),\n\t\tshowForm() {\n\t\t\tthis.formWrapper.style.display = \"flex\";\n\t\t},\n\t\thideForm() {\n\t\t\tthis.formWrapper.style.display = \"none\";\n\t\t},\n\t\tsubmitForm(form) {\n\t\t\tlet valueFromForm = this.serializeForm(form);\n\t\t\tthis.hideForm();\n\t\t\tprojectManipulation.createProject(valueFromForm);\n\t\t},\n\t\tserializeForm(formNode) {\n\t\t\t//обрабатывает значения полей и возвращает массив с значениями\n\t\t\tconst { elements } = formNode;\n\t\t\tlet formValues = Array.from(elements)\n\t\t\t\t.filter((item) => !!item.name)\n\t\t\t\t.map(function (element) {\n\t\t\t\t\tconst { name, value } = element;\n\t\t\t\t\treturn { name, value };\n\t\t\t\t});\n\t\t\treturn formValues;\n\t\t},\n\t};\n\t//project form manipulations end\n\n\tclass Project {\n\t\tconstructor(name) {\n\t\t\tthis.name = name;\n\t\t\tthis.isActive = false;\n\t\t\tthis.purposes = []; // массив для хранения целей проекта\n\t\t\tsharedData.projects.push(this);\n\n\t\t\t//Добавляю PROJECT to LOCALSTORAGE\n\t\t\tvar projectsStorage = localStorage.getItem(\"projects\");\n\t\t\tvar projects = JSON.parse(projectsStorage);\n\t\t\tvar self = this;\n\t\t\tvar addProject = true;\n\n\t\t\t//смотрю, есть ли уже этот проект в хранилище\n\t\t\tprojects.forEach(function (project) {\n\t\t\t\tif (deepEqualObjects(project, self)) {\n\t\t\t\t\taddProject = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\t//смотрю, есть ли уже этот проект в хранилище\n\n\t\t\tif (addProject) {\n\t\t\t\tprojects.push(this);\n\t\t\t}\n\t\t\tvar updatedProjectsStorage = JSON.stringify(projects);\n\t\t\tlocalStorage.setItem(\"projects\", updatedProjectsStorage);\n\t\t\t//Добавляю PROJECT to LOCALSTORAGE\n\t\t}\n\t}\n\n\tlet purposesManipulation = {\n\t\tdeletePurpose(purpose) {\n\t\t\t//DOMpurpose - это ДОМ элемент этой цели\n\t\t\t//purpose - это объект с целью\n\t\t\tlet mainSide = document.querySelector(\".main_side\");\n\t\t\tlet deleteBtn = purpose.DOM.querySelector(\".trash\");\n\t\t\tdeleteBtn.addEventListener(\"click\", function () {\n\t\t\t\tmainSide.removeChild(purpose.DOM); //удаляю ДОМ-узел цели\n\t\t\t\tfor (let i = 0; i < sharedData.projects.length; i++) {\n\t\t\t\t\tif (sharedData.projects[i].isActive == true) {\n\t\t\t\t\t\tlet index = sharedData.projects[i].purposes.indexOf(purpose);\n\t\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\t\tsharedData.projects[i].purposes.splice(index, 1); //удаляю цель из массива\n\t\t\t\t\t\t\t//УДАЛЕНИЕ ЦЕЛИ ИЗ ЛОКАЛСТОРАГЕ\n\t\t\t\t\t\t\tvar projectsStorage = localStorage.getItem(\"projects\");\n\t\t\t\t\t\t\tvar projects = JSON.parse(projectsStorage);\n\t\t\t\t\t\t\tprojects.forEach(function (project) {\n\t\t\t\t\t\t\t\tif (deepEqualObjects(project, sharedData.projects[i])) {\n\t\t\t\t\t\t\t\t\t//нашла совпадающий проект +\n\t\t\t\t\t\t\t\t\tproject.purposes.forEach(function (storagePurpose) {\n\t\t\t\t\t\t\t\t\t\tif (deepEqualObjects(storagePurpose, purpose)) {\n\t\t\t\t\t\t\t\t\t\t\t//нашла совпавшую цель +\n\t\t\t\t\t\t\t\t\t\t\tproject.purposes.splice(index, 1); //yaay, она удаляется\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tlocalStorage.setItem(\"projects\", JSON.stringify(projects));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t//УДАЛЕНИЕ ЦЕЛИ ИЗ ЛОКАЛСТОРАГЕ\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tchangePurpose(purpose) {\n\t\t\tlet changeBtn = purpose.DOM.querySelector(\".change\");\n\n\t\t\tchangeBtn.addEventListener(\"click\", function () {\n\t\t\t\tlet formWrapper = document.querySelector(\".pop-up_purpose_window\");\n\t\t\t\tformWrapper.style.display = \"flex\";\n\n\t\t\t\t// делаю чтобы форма с изменением цели отображалась как надо\n\t\t\t\tlet title = formWrapper.querySelector(\".title\");\n\t\t\t\tlet submitBtn = formWrapper.querySelector(\"#submit_btn\");\n\t\t\t\tlet formNodelist = formWrapper.querySelectorAll(\".input\");\n\n\t\t\t\ttitle.textContent = \"Change Form\";\n\t\t\t\tsubmitBtn.textContent = \"Change\";\n\t\t\t\tformNodelist.forEach(function (input) {\n\t\t\t\t\tswitch (input.id) {\n\t\t\t\t\t\tcase \"title\":\n\t\t\t\t\t\t\tinput.value = purpose.title;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"deadline\":\n\t\t\t\t\t\t\tinput.value = purpose.deadline;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"details\":\n\t\t\t\t\t\t\tinput.value = purpose.details;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"priority\":\n\t\t\t\t\t\t\tinput.value = purpose.priority;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t// делаю чтобы форма с изменением цели отображалась как надо\n\t\t\t\tsharedData.currentPurpose = purpose;\n\t\t\t});\n\t\t},\n\t};\n\n\tlet projectManipulation = {\n\t\tcreateProject(valueFromForm) {\n\t\t\tlet project = new Project(valueFromForm[0].value);\n\t\t\tlet DOMproject = projectDOMCreation(project);\n\t\t\tlet deleteBtn = DOMproject.querySelector(\".trash\");\n\t\t\tdeleteBtn.addEventListener(\"click\", function () {\n\t\t\t\tprojectManipulation.deleteProject(project, DOMproject);\n\t\t\t});\n\t\t},\n\t\tdeleteProject(project, DOMproject) {\n\t\t\tfor (let i = 0; i < sharedData.projects.length; i++) {\n\t\t\t\tif (sharedData.projects[i] == project) {\n\t\t\t\t\tsharedData.projects.splice(i, 1); //удаляю проект и его содержимое из массива\n\n\t\t\t\t\t//УДАЛЕНИЕ ИЗ LOCALSTORAGE\n\t\t\t\t\tvar projectsStorage = localStorage.getItem(\"projects\");\n\t\t\t\t\tvar projects = JSON.parse(projectsStorage);\n\t\t\t\t\tprojects.forEach(function (storageProject) {\n\t\t\t\t\t\tif (deepEqualObjects(project, storageProject)) {\n\t\t\t\t\t\t\tlet index = projects.indexOf(storageProject);\n\t\t\t\t\t\t\tprojects.splice(index, 1);\n\t\t\t\t\t\t\tlocalStorage.setItem(\"projects\", JSON.stringify(projects));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t//УДАЛЕНИЕ ИЗ LOCALSTORAGE\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet parentNode = document.querySelector(\".projects_list\");\n\t\t\tparentNode.removeChild(DOMproject); //удаление ДОМ-элемента с проектом\n\t\t\tprojectName.textContent = \"deleted project\";\n\t\t\t//удаляются нодлисты его целей :\n\t\t\tlet mainSide = document.querySelector(\".main_side\");\n\t\t\tlet purposesNodelist = mainSide.querySelectorAll(\".to-do-line\");\n\t\t\tpurposesNodelist.forEach((purposeNode) => {\n\t\t\t\tif (purposeNode.style.display === \"block\")\n\t\t\t\t\tmainSide.removeChild(purposeNode);\n\t\t\t});\n\t\t},\n\t\tcreationOfStorageProjects() {\n\t\t\tvar projectsStorage = localStorage.getItem(\"projects\");\n\t\t\tvar storageProjects = JSON.parse(projectsStorage);\n\t\t\tstorageProjects.forEach(function (proj) {\n\t\t\t\tprojectManipulation.createProject([{ value: proj.name }]);\n\t\t\t\tlet projectList = document.querySelector(\".project_list\");\n\t\t\t\tlet toggleImg = projectList.querySelector(\".toggle\");\n\t\t\t\tlet sharedDataProj = {};\n\t\t\t\tsharedData.projects.forEach(function (SDproject) {\n\t\t\t\t\tif (deepEqualObjects(SDproject, proj)) {\n\t\t\t\t\t\tsharedDataProj = SDproject;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tproj.purposes.forEach(function (purpose) {\n\t\t\t\t\t//помещаю в sharedData цели из localStorage\n\t\t\t\t\tsharedDataProj.purposes.push(purpose);\n\t\t\t\t\tpurpose.DOM = purposeDOMCreation(purpose);\n\t\t\t\t\tpurposesManipulation.deletePurpose(purpose);\n\t\t\t\t\tpurposesManipulation.changePurpose(purpose);\n\n\t\t\t\t\tlet checkbox = purpose.DOM.querySelector(\"#todo-checkbox\");\n\n\t\t\t\t\t///чтобы если цель isDone, после перезагрузки она правильно отображалась\n\t\t\t\t\tlet titleText = purpose.DOM.querySelector(\"#title_text\");\n\t\t\t\t\tstorageProjects.forEach(function (proj) {\n\t\t\t\t\t\tproj.purposes.forEach(function (storagePurpose) {\n\t\t\t\t\t\t\tif (deepEqualObjects(storagePurpose, purpose)) {\n\t\t\t\t\t\t\t\tif (storagePurpose.isDone === true) {\n\t\t\t\t\t\t\t\t\ttitleText.style.color = \"grey\";\n\t\t\t\t\t\t\t\t\ttitleText.style.textDecoration = \"line-through\";\n\t\t\t\t\t\t\t\t\tcheckbox.checked = true;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\ttitleText.style.color = \"black\";\n\t\t\t\t\t\t\t\t\ttitleText.style.textDecoration = \"none\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\t///чтобы если цель isDone, после перезагрузки она правильно отображалась\n\n\t\t\t\t\tcheckbox.addEventListener(\"click\", function () {\n\t\t\t\t\t\tstorageProjects.forEach(function (proj) {\n\t\t\t\t\t\t\tproj.purposes.forEach(function (storagePurpose) {\n\t\t\t\t\t\t\t\tif (deepEqualObjects(storagePurpose, purpose)) {\n\t\t\t\t\t\t\t\t\tif (storagePurpose.isDone === false) {\n\t\t\t\t\t\t\t\t\t\ttitleText.style.color = \"grey\";\n\t\t\t\t\t\t\t\t\t\ttitleText.style.textDecoration = \"line-through\";\n\t\t\t\t\t\t\t\t\t\tpurpose.isDone = true;\n\t\t\t\t\t\t\t\t\t\tstoragePurpose.isDone = true;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tpurpose.isDone = false;\n\t\t\t\t\t\t\t\t\t\ttitleText.style.color = \"black\";\n\t\t\t\t\t\t\t\t\t\ttitleText.style.textDecoration = \"none\";\n\t\t\t\t\t\t\t\t\t\tstoragePurpose.isDone = false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar updatedProjectsStorage = JSON.stringify(storageProjects);\n\t\t\t\t\t\tlocalStorage.setItem(\"projects\", updatedProjectsStorage);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\ttoggleManiplation.openToggle(toggleImg, projectList, proj);\n\t\t\t});\n\t\t},\n\t\talwaysOpenFirstProject() {\n\t\t\t//чтобы по дефолту всегда открыт первый проект\n\t\t\tlet firstProject = sharedData.projects[0];\n\t\t\tlet projectList = document.querySelector(\".project_list\");\n\t\t\tlet toggleImg = projectList.querySelector(\".toggle\");\n\t\t\ttoggleManiplation.openToggle(toggleImg, projectList, firstProject);\n\t\t\tlet toggle = document.querySelector(\".toggle\");\n\t\t\ttoggle.click();\n\t\t\ttoggle.click();\n\t\t},\n\t};\n\n\tlet projectDOMCreation = function (project) {\n\t\tlet container = document.querySelector(\".projects_list\");\n\t\tlet projectList = document.createElement(\"div\");\n\t\tprojectList.classList.add(\"project_list\");\n\t\tcontainer.appendChild(projectList);\n\n\t\tlet toggle = document.createElement(\"button\");\n\t\ttoggle.classList.add(\"toggle\");\n\t\tprojectList.appendChild(toggle);\n\t\tlet toggleImg = document.createElement(\"img\");\n\t\ttoggleImg.classList.add(\"toggle_img\");\n\t\ttoggleImg.setAttribute(\"src\", \"pics/toggle_off.svg\");\n\t\t//делаю чтобы только один проект одновременно был активный\n\t\ttoggle.addEventListener(\"click\", function () {\n\t\t\tif (\n\t\t\t\ttoggleManiplation.isToggleOpen === false &&\n\t\t\t\tproject.isActive === false\n\t\t\t) {\n\t\t\t\ttoggleManiplation.openToggle(toggleImg, projectList, project);\n\t\t\t} else if (\n\t\t\t\ttoggleManiplation.isToggleOpen === true &&\n\t\t\t\tproject.isActive === true\n\t\t\t) {\n\t\t\t\ttoggleManiplation.closeToggle(toggleImg, projectList, project);\n\t\t\t} else if (\n\t\t\t\ttoggleManiplation.isToggleOpen === true &&\n\t\t\t\tproject.isActive === false\n\t\t\t) {\n\t\t\t\tfor (let i = 0; i < sharedData.projects.length; i++) {\n\t\t\t\t\tif (sharedData.projects[i].isActive === true) {\n\t\t\t\t\t\tsharedData.projects[i].isActive = false;\n\n\t\t\t\t\t\tlet projectList = container.querySelectorAll(\".project_list\");\n\t\t\t\t\t\tlet toggleImages = container.querySelectorAll(\".toggle_img\");\n\t\t\t\t\t\tprojectList.forEach((projectList) => {\n\t\t\t\t\t\t\tprojectList.style.background = \"rgba(172, 196, 204, 1)\";\n\t\t\t\t\t\t\tprojectList.style.border = \"none\";\n\t\t\t\t\t\t});\n\t\t\t\t\t\ttoggleImages.forEach((image) => {\n\t\t\t\t\t\t\timage.setAttribute(\"src\", \"pics/toggle_off.svg\");\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\ttoggleManiplation.openToggle(toggleImg, projectList, project);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t//делаю чтобы только один проект одновременно был активный\n\t\ttoggle.appendChild(toggleImg);\n\n\t\tlet projectName = document.createElement(\"p\");\n\t\tprojectName.textContent = project.name;\n\t\tprojectList.appendChild(projectName);\n\n\t\tlet trash = document.createElement(\"button\");\n\t\ttrash.classList.add(\"trash\");\n\t\tprojectList.appendChild(trash);\n\t\tlet trashImg = document.createElement(\"img\");\n\t\ttrashImg.setAttribute(\"src\", \"pics/trash.svg\");\n\t\ttrash.appendChild(trashImg);\n\t\treturn projectList;\n\t};\n\n\tlet toggleManiplation = {\n\t\tisToggleOpen: false,\n\t\topenToggle(toggleImg, projectList, project) {\n\t\t\tthis.isToggleOpen = true;\n\t\t\ttoggleImg.setAttribute(\"src\", \"pics/toggle_on.svg\");\n\t\t\tprojectList.style.background = \"#B49463\";\n\t\t\tprojectList.style.border = \"1px solid black\";\n\t\t\tmainSideManipulation.setProjectName(project.name);\n\t\t\tproject.isActive = true;\n\t\t\tmainSideManipulation.purposeDisplaying(project);\n\t\t\t//каждый раз при клике на тоггл должны отображаться цели\n\t\t},\n\t\tcloseToggle(toggleImg, projectList, project) {\n\t\t\tthis.isToggleOpen = false;\n\t\t\ttoggleImg.setAttribute(\"src\", \"pics/toggle_off.svg\");\n\t\t\tprojectList.style.background = \"rgba(172, 196, 204, 1)\";\n\t\t\tprojectList.style.border = \"none\";\n\t\t\tproject.isActive = false;\n\t\t},\n\t};\n\n\tlet mainSideManipulation = {\n\t\tprojectName: document.getElementById(\"projectName\"),\n\t\tmainSide: document.querySelector(\".main_side\"),\n\n\t\tpurposeDisplaying(project) {\n\t\t\tlet purposeNodelist = this.mainSide.querySelectorAll(\".to-do-line\");\n\t\t\tpurposeNodelist.forEach((purpose) => {\n\t\t\t\tlet title = purpose.querySelector(\"#title_text\");\n\t\t\t\tif (project.purposes.length === 0) {\n\t\t\t\t\t//when the project is empty, no purposes displaying\n\t\t\t\t\tpurpose.style.display = \"none\";\n\t\t\t\t}\n\t\t\t\tfor (let i = 0; i < project.purposes.length; i++) {\n\t\t\t\t\tif (project.purposes[i].title === title.textContent) {\n\t\t\t\t\t\t//if purpose with this title exist in this project\n\t\t\t\t\t\tpurpose.style.display = \"block\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpurpose.style.display = \"none\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tsetProjectName(newProjectName) {\n\t\t\tthis.projectName.textContent = newProjectName;\n\t\t},\n\t};\n\tprojectManipulation.creationOfStorageProjects();\n\tprojectManipulation.alwaysOpenFirstProject();\n};\n\nexport { projectCreation };\n","//создание проекта\n\nimport \"../styles/style.scss\";\nimport { projectCreation } from \"./projects.js\";\nprojectCreation();\nimport { purposesCreation } from \"./purposes.js\";\npurposesCreation();\n\n//localStorage.removeItem(\"projects\");\n","import { sharedData } from \"./sharedData.js\";\nimport { purposeDOMCreation } from \"./DOMCreation.js\";\nimport { deepEqualObjects } from \"./storage.js\";\n\nconst purposesCreation = function () {\n\tlet addPurposeBtn = document.querySelector(\".addPurposeBtn\");\n\taddPurposeBtn.addEventListener(\"click\", function () {\n\t\tformManipulation.showEmptyForm();\n\t});\n\n\tlet form = document.getElementById(\"purposeForm\");\n\tform.addEventListener(\"submit\", function (event) {\n\t\tevent.preventDefault();\n\t\tlet purpose;\n\t\tlet valueFromForm = formManipulation.serializeForm(form);\n\n\t\tif (sharedData.currentPurpose) {\n\t\t\tpurpose = sharedData.currentPurpose;\n\t\t\t//удалила прошлый ДОМ-узел\n\t\t\tlet mainSide = document.querySelector(\".main_side\");\n\t\t\tmainSide.removeChild(purpose.DOM);\n\t\t\t//удалила прошлый ДОМ-узел\n\t\t\tlet updatedPurpose = purposeUpdate(valueFromForm);\n\t\t\tpurpose.DOM = purposeDOMCreation(updatedPurpose); // создаст новый ДОМ-узел\n\t\t\tsharedData.currentPurpose = null;\n\t\t} else {\n\t\t\tpurpose = purposeCreation(valueFromForm);\n\t\t\tpurpose.DOM = purposeDOMCreation(purpose);\n\t\t}\n\n\t\tpurposeDelete(purpose);\n\t\tpurposeChange(purpose);\n\t\tlet checkbox = purpose.DOM.querySelector(\"#todo-checkbox\");\n\t\tcheckbox.addEventListener(\"click\", function () {\n\t\t\tcheckboxManipulation(purpose);\n\t\t});\n\t\tformManipulation.hideForm();\n\t});\n\n\tlet closeBtn = document.querySelector(\".closePurposetBtn\");\n\tcloseBtn.addEventListener(\"click\", function () {\n\t\tformManipulation.hideForm();\n\t});\n\n\tlet formWrapper = document.querySelector(\".pop-up_purpose_window\");\n\tsharedData.currentPurpose = null;\n\tlet formManipulation = {\n\t\ttitle: formWrapper.querySelector(\".title\"),\n\t\tsubmitBtn: formWrapper.querySelector(\"#submit_btn\"),\n\t\tformNodelist: formWrapper.querySelectorAll(\".input\"),\n\t\tshowEmptyForm() {\n\t\t\tthis.title.textContent = \"New Form\";\n\t\t\tthis.submitBtn.textContent = \"Add\";\n\t\t\tthis.formNodelist.forEach(function (input) {\n\t\t\t\tinput.value = \"\";\n\t\t\t});\n\t\t\tformWrapper.style.display = \"flex\";\n\t\t},\n\t\tshowFilledForm(purpose) {\n\t\t\tsharedData.currentPurpose = purpose;\n\t\t\tthis.title.textContent = \"Change Form\";\n\t\t\tthis.submitBtn.textContent = \"Change\";\n\t\t\tthis.formNodelist.forEach(function (input) {\n\t\t\t\tswitch (input.id) {\n\t\t\t\t\tcase \"title\":\n\t\t\t\t\t\tinput.value = purpose.title;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"deadline\":\n\t\t\t\t\t\tinput.value = purpose.deadline;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"details\":\n\t\t\t\t\t\tinput.value = purpose.details;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"priority\":\n\t\t\t\t\t\tinput.value = purpose.priority;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t\tformWrapper.style.display = \"flex\";\n\t\t},\n\t\thideForm() {\n\t\t\tformWrapper.style.display = \"none\";\n\t\t},\n\t\tserializeForm(formNode) {\n\t\t\tconst { elements } = formNode;\n\t\t\tlet formValues = Array.from(elements)\n\t\t\t\t.filter((item) => !!item.name)\n\t\t\t\t.map(function (element) {\n\t\t\t\t\tconst { name, value } = element;\n\t\t\t\t\treturn { name, value };\n\t\t\t\t});\n\t\t\treturn formValues;\n\t\t},\n\t};\n\n\tlet purposeCreation = function (arr) {\n\t\tlet purpose = {\n\t\t\tisDone: false,\n\t\t};\n\t\tpurpose.title = arr[0].value;\n\t\tpurpose.deadline = arr[1].value;\n\t\tpurpose.details = arr[2].value;\n\t\tpurpose.priority = arr[3].value;\n\t\tpurpose.DOM = \"\";\n\n\t\t//ДОБАВЛЕНИЕ PURPOSE В LOCALSTORAGE\n\t\tfor (let i = 0; i < sharedData.projects.length; i++) {\n\t\t\tif (sharedData.projects[i].isActive == true) {\n\t\t\t\tsharedData.projects[i].purposes.push(purpose);\n\n\t\t\t\tvar projectsStorage = localStorage.getItem(\"projects\");\n\t\t\t\tvar projects = JSON.parse(projectsStorage);\n\t\t\t\tprojects.forEach(function (project) {\n\t\t\t\t\tif (deepEqualObjects(project, sharedData.projects[i])) {\n\t\t\t\t\t\tlet projectIndex = projects.findIndex((proj) => proj === project);\n\t\t\t\t\t\t//добавляю цель в нужный проект, обновляю localStorage\n\t\t\t\t\t\tif (projectIndex !== -1) {\n\t\t\t\t\t\t\tprojects[projectIndex].purposes.push(purpose);\n\t\t\t\t\t\t\tlocalStorage.setItem(\"projects\", JSON.stringify(projects));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t//ДОБАВЛЕНИЕ PURPOSE В LOCALSTORAGE\n\t\treturn purpose;\n\t};\n\n\t//чтобы при нажатии на чекбокс цели текст становился серым\n\tlet checkboxManipulation = function (purpose) {\n\t\tlet titleText = purpose.DOM.querySelector(\"#title_text\");\n\t\tvar projectsStorage = localStorage.getItem(\"projects\");\n\t\tvar storageProjects = JSON.parse(projectsStorage);\n\n\t\tstorageProjects.forEach(function (proj) {\n\t\t\tproj.purposes.forEach(function (storagePurpose) {\n\t\t\t\tif (deepEqualObjects(storagePurpose, purpose)) {\n\t\t\t\t\tif (storagePurpose.isDone === false) {\n\t\t\t\t\t\ttitleText.style.color = \"grey\";\n\t\t\t\t\t\ttitleText.style.textDecoration = \"line-through\";\n\t\t\t\t\t\tpurpose.isDone = true;\n\t\t\t\t\t\tstoragePurpose.isDone = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpurpose.isDone = false;\n\t\t\t\t\t\ttitleText.style.color = \"black\";\n\t\t\t\t\t\ttitleText.style.textDecoration = \"none\";\n\t\t\t\t\t\tstoragePurpose.isDone = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\t// Преобразую storageProjects обратно в строку JSON\n\t\tvar updatedProjectsStorage = JSON.stringify(storageProjects);\n\t\t// Обновляю данные в localStorage\n\t\tlocalStorage.setItem(\"projects\", updatedProjectsStorage);\n\t};\n\n\tlet purposeDelete = function (purpose) {\n\t\t//DOMpurpose - это ДОМ элемент этой цели\n\t\t//purpose - это объект с целью\n\t\tlet mainSide = document.querySelector(\".main_side\");\n\t\tlet deleteBtn = purpose.DOM.querySelector(\".trash\");\n\t\tdeleteBtn.addEventListener(\"click\", function () {\n\t\t\tmainSide.removeChild(purpose.DOM); //удаляю ДОМ-узел цели\n\t\t\tfor (let i = 0; i < sharedData.projects.length; i++) {\n\t\t\t\tif (sharedData.projects[i].isActive == true) {\n\t\t\t\t\tlet index = sharedData.projects[i].purposes.indexOf(purpose);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tsharedData.projects[i].purposes.splice(index, 1); //удаляю цель из массива\n\t\t\t\t\t\t//УДАЛЕНИЕ ЦЕЛИ ИЗ ЛОКАЛСТОРАГЕ\n\t\t\t\t\t\tvar projectsStorage = localStorage.getItem(\"projects\");\n\t\t\t\t\t\tvar projects = JSON.parse(projectsStorage);\n\t\t\t\t\t\tprojects.forEach(function (project) {\n\t\t\t\t\t\t\tif (deepEqualObjects(project, sharedData.projects[i])) {\n\t\t\t\t\t\t\t\t//нашла совпадающий проект +\n\t\t\t\t\t\t\t\tproject.purposes.forEach(function (storagePurpose) {\n\t\t\t\t\t\t\t\t\tif (deepEqualObjects(storagePurpose, purpose)) {\n\t\t\t\t\t\t\t\t\t\t//нашла совпавшую цель +\n\t\t\t\t\t\t\t\t\t\tproject.purposes.splice(index, 1); //yaay, она удаляется\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tlocalStorage.setItem(\"projects\", JSON.stringify(projects));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//УДАЛЕНИЕ ЦЕЛИ ИЗ ЛОКАЛСТОРАГЕ\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tlet purposeUpdate = function (arr) {\n\t\t//изменение цели в LOCALSTORAGE\n\t\tvar projectsStorage = localStorage.getItem(\"projects\");\n\t\tvar projects = JSON.parse(projectsStorage);\n\t\tprojects.forEach(function (storageProject) {\n\t\t\tstorageProject.purposes.forEach(function (storagePurpose) {\n\t\t\t\tif (deepEqualObjects(storagePurpose, sharedData.currentPurpose)) {\n\t\t\t\t\tstoragePurpose.title = arr[0].value;\n\t\t\t\t\tstoragePurpose.deadline = arr[1].value;\n\t\t\t\t\tstoragePurpose.details = arr[2].value;\n\t\t\t\t\tstoragePurpose.priority = arr[3].value;\n\t\t\t\t\tlocalStorage.setItem(\"projects\", JSON.stringify(projects));\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\t//изменение цели в LOCALSTORAGE\n\n\t\tsharedData.currentPurpose.title = arr[0].value;\n\t\tsharedData.currentPurpose.deadline = arr[1].value;\n\t\tsharedData.currentPurpose.details = arr[2].value;\n\t\tsharedData.currentPurpose.priority = arr[3].value;\n\t\treturn sharedData.currentPurpose;\n\t};\n\n\tlet purposeChange = function (purpose) {\n\t\tlet changeBtn = purpose.DOM.querySelector(\".change\");\n\t\tchangeBtn.addEventListener(\"click\", function () {\n\t\t\tformManipulation.showFilledForm(purpose);\n\t\t});\n\t};\n};\nexport { purposesCreation };\n"],"names":["sharedData","projects","currentPurpose","purposeDOMCreation","purpose","mainSide","document","querySelector","newGoal","cloneNode","style","display","appendChild","textContent","title","deadline","toggle","isFull","addEventListener","fullPart","toggleImg","setAttribute","hideFull","createElement","className","descriptionSide","descriptionText","description","details","prioritySide","priorityText","priority","localStorage","getItem","projectsStorage","JSON","stringify","name","isActive","purposes","setItem","deepEqualObjects","obj1","obj2","keys1","Object","keys","keys2","length","key","deepEqual","formManipulation","showForm","form","getElementById","event","preventDefault","submitForm","hideForm","formWrapper","this","valueFromForm","serializeForm","projectManipulation","createProject","formNode","elements","Array","from","filter","item","map","element","value","Project","constructor","push","parse","self","addProject","forEach","project","updatedProjectsStorage","purposesManipulation","deletePurpose","DOM","removeChild","i","index","indexOf","splice","storagePurpose","changePurpose","submitBtn","formNodelist","querySelectorAll","input","id","DOMproject","projectDOMCreation","deleteProject","storageProject","projectName","purposeNode","creationOfStorageProjects","storageProjects","proj","projectList","sharedDataProj","SDproject","checkbox","titleText","isDone","color","textDecoration","checked","toggleManiplation","openToggle","alwaysOpenFirstProject","firstProject","click","container","classList","add","isToggleOpen","closeToggle","toggleImages","background","border","image","trash","trashImg","mainSideManipulation","setProjectName","purposeDisplaying","newProjectName","projectCreation","showEmptyForm","updatedPurpose","purposeUpdate","purposeCreation","purposeDelete","purposeChange","checkboxManipulation","showFilledForm","arr","projectIndex","findIndex","purposesCreation"],"sourceRoot":""}